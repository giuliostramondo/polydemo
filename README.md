# Polyhedral Lecture Demos
Demo for Polyhedral compilation lecture

[Demo 1: Matrix Multiply Representation](http://playground.pollylabs.org/?sess=%7B%221%22%3A%5B%22context%20%3D%20isl.set(%5C%22%7B%20%3A%20%7D%5C%22)%5Cndomain%20%3D%20isl.union_set(%5C%22%5BN%2CM%5D-%3E%7B%20S%5Bi%2Cj%5D%20%3A%200%20%3C%3Di%3C%3DN%20and%200%3C%3Dj%3C%3DM%3B%20%20T%5Bi%2Cj%2Ck%5D%20%3A%200%20%3C%3Di%3C%3DN%20and%200%3C%3Dj%3C%3DM%20and%200%3C%3Dk%3C%3DM%20%7D%5C%22)%5Cnschedule%20%3D%20isl.union_map(%5C%22%7B%20S%5Bi%2Cj%5D%20-%3E%20W%5Bi%2Cj%2C-1%5D%20%3B%20T%5Bi%2Cj%2Ck%5D-%3EW%5Bi%2Cj%2Ck%5D%20%7D%5C%22)%5Cnschedule_domain%20%3D%20schedule.intersect_domain(domain)%5Cn%22%2C%22%22%2C%22%22%5D%2C%222%22%3A%5B%22build%20%3D%20isl.ast_build.from_context(context)%20%5Cnast%20%3D%20build.node_from_schedule_map(schedule.intersect_domain(domain))%5Cnprint_code(ast)%22%2C%22%22%2C%22%22%5D%2C%223%22%3A%5B%22%22%2C%22%22%2C%22%22%5D%7D)

[Demo 2: Matrix Multiply Transformations](http://playground.pollylabs.org/?sess=%7B%221%22%3A%5B%22context%20%3D%20isl.set(%5C%22%7B%20%3A%20%7D%5C%22)%5Cndomain%20%3D%20isl.union_set(%5C%22%7B%20S%5Bi%2Cj%5D%20%3A%200%20%3C%3Di%3C10%20and%200%3C%3Dj%3C20%3B%20%20T%5Bi%2Cj%2Ck%5D%20%3A%200%20%3C%3Di%3C10%20and%200%3C%3Dj%3C20%20and%200%3C%3Dk%3C30%20%7D%5C%22)%5Cnschedule%20%3D%20isl.union_map(%5C%22%7B%20S%5Bi%2Cj%5D%20-%3E%20W%5Bi%2Cj%2C-1%5D%20%3B%20T%5Bi%2Cj%2Ck%5D-%3EW%5Bi%2Cj%2Ck%5D%20%7D%5C%22)%5Cnschedule_domain%20%3D%20schedule.intersect_domain(domain)%5Cn%22%2C%22%22%2C%22python%22%5D%2C%222%22%3A%5B%22build%20%3D%20isl.ast_build.from_context(context)%20%5Cnast%20%3D%20build.node_from_schedule_map(schedule.intersect_domain(domain))%5Cnprint_code(ast)%22%2C%22%3Cpre%20class%3D%27code%27%3E%3Ccode%20class%3D%5C%22cpp%20hljs%5C%22%3Efor%20(int%20c0%20%3D%200%3B%20c0%20%3C%3D%209%3B%20c0%20%2B%3D%201)%5Cn%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%2019%3B%20c1%20%2B%3D%201)%20%7B%5Cn%20%20%20%20S(c0%2C%20c1)%3B%5Cn%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%2029%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20T(c0%2C%20c1%2C%20c2)%3B%5Cn%20%20%7D%5Cn%3C%2Fcode%3E%3C%2Fpre%3E%5Cn%22%2C%22python%22%5D%2C%223%22%3A%5B%22%23Loop%20Permutation%5Cn%23%23%20i%2Cj%20permutation%22%2C%22%3Ca%20onclick%3D%27pt_editMarkdown(this)%27%20tabindex%3D%27-1%27%20class%3D%5C%22pt-markdown-link%5C%22%3E%5BMarkdown%5D%3C%2Fa%3E%3Ch1%20id%3D%5C%22looppermutation%5C%22%3ELoop%20Permutation%3C%2Fh1%3E%5Cn%3Ch2%20id%3D%5C%22ijpermutation%5C%22%3Ei%2Cj%20permutation%3C%2Fh2%3E%5Cn%22%2C%22markdown%22%5D%2C%224%22%3A%5B%22transformation%20%3D%20isl.union_map(%5C%22%7BW%5Bi%2Cj%2Ck%5D-%3EW%5Bj%2Ci%2Ck%5D%7D%5C%22)%5Cntransformed_schedule%20%3D%20schedule.apply_range(transformation)%5Cnast_i_j%20%3D%20build.node_from_schedule_map(transformed_schedule.intersect_domain(domain))%5Cnprint_code(ast_i_j)%22%2C%22%3Cpre%20class%3D%27code%27%3E%3Ccode%20class%3D%5C%22cpp%20hljs%5C%22%3Efor%20(int%20c0%20%3D%200%3B%20c0%20%3C%3D%2019%3B%20c0%20%2B%3D%201)%5Cn%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%209%3B%20c1%20%2B%3D%201)%20%7B%5Cn%20%20%20%20S(c1%2C%20c0)%3B%5Cn%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%2029%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20T(c1%2C%20c0%2C%20c2)%3B%5Cn%20%20%7D%5Cn%3C%2Fcode%3E%3C%2Fpre%3E%5Cn%22%2C%22python%22%5D%2C%225%22%3A%5B%22%23%23%20Move%20K%20to%20outermost%20loop%22%2C%22%3Ca%20onclick%3D%27pt_editMarkdown(this)%27%20tabindex%3D%27-1%27%20class%3D%5C%22pt-markdown-link%5C%22%3E%5BMarkdown%5D%3C%2Fa%3E%3Ch2%20id%3D%5C%22movektooutermostloop%5C%22%3EMove%20K%20to%20outermost%20loop%3C%2Fh2%3E%5Cn%22%2C%22markdown%22%5D%2C%226%22%3A%5B%22transformation_2%20%3D%20isl.union_map(%5C%22%7BW%5Bi%2Cj%2Ck%5D-%3EW%5Bk%2Ci%2Cj%5D%7D%5C%22)%5Cntransformed_schedule_2%20%3D%20schedule.apply_range(transformation_2)%5Cnast_i_k%20%3D%20build.node_from_schedule_map(transformed_schedule_2.intersect_domain(domain))%5Cnprint_code(ast_i_k)%22%2C%22%3Cpre%20class%3D%27code%27%3E%3Ccode%20class%3D%5C%22cpp%20hljs%5C%22%3E%7B%5Cn%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%209%3B%20c1%20%2B%3D%201)%5Cn%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%2019%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20S(c1%2C%20c2)%3B%5Cn%20%20for%20(int%20c0%20%3D%200%3B%20c0%20%3C%3D%2029%3B%20c0%20%2B%3D%201)%5Cn%20%20%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%209%3B%20c1%20%2B%3D%201)%5Cn%20%20%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%2019%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20T(c1%2C%20c2%2C%20c0)%3B%5Cn%7D%5Cn%3C%2Fcode%3E%3C%2Fpre%3E%5Cn%22%2C%22python%22%5D%2C%227%22%3A%5B%22%23%20Loop%20Tiling%22%2C%22%3Ca%20onclick%3D%27pt_editMarkdown(this)%27%20tabindex%3D%27-1%27%20class%3D%5C%22pt-markdown-link%5C%22%3E%5BMarkdown%5D%3C%2Fa%3E%3Ch1%20id%3D%5C%22looptiling%5C%22%3ELoop%20Tiling%3C%2Fh1%3E%5Cn%22%2C%22markdown%22%5D%2C%228%22%3A%5B%22tile_size%3D5%5Cntransformation_3%20%3D%20isl.union_map(%5C%22%7BW%5Bi%2Cj%2Ck%5D-%3EW%5Bfloor(i%2F5)%2Cfloor(j%2F5)%2Ci%255%2Cj%255%2Ck%5D%7D%5C%22)%5Cntransformed_schedule_3%20%3D%20schedule.apply_range(transformation_3)%5Cnast_i_k%20%3D%20build.node_from_schedule_map(transformed_schedule_3.intersect_domain(domain))%5Cnprint_code(ast_i_k)%22%2C%22%3Cpre%20class%3D%27code%27%3E%3Ccode%20class%3D%5C%22cpp%20hljs%5C%22%3Efor%20(int%20c0%20%3D%200%3B%20c0%20%3C%3D%201%3B%20c0%20%2B%3D%201)%5Cn%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%203%3B%20c1%20%2B%3D%201)%5Cn%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%204%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20for%20(int%20c3%20%3D%200%3B%20c3%20%3C%3D%204%3B%20c3%20%2B%3D%201)%20%7B%5Cn%20%20%20%20%20%20%20%20S(5%20*%20c0%20%2B%20c2%2C%205%20*%20c1%20%2B%20c3)%3B%5Cn%20%20%20%20%20%20%20%20for%20(int%20c4%20%3D%200%3B%20c4%20%3C%3D%2029%3B%20c4%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20%20%20T(5%20*%20c0%20%2B%20c2%2C%205%20*%20c1%20%2B%20c3%2C%20c4)%3B%5Cn%20%20%20%20%20%20%7D%5Cn%3C%2Fcode%3E%3C%2Fpre%3E%5Cn%22%2C%22python%22%5D%2C%229%22%3A%5B%22%23%23%23Order%20of%20update%20on%20C%5Cn%23%23%23%23%20Tile%201%5CnC%5B0%2C0%5D%2CC%5B0%2C1%5D%2CC%5B0%2C2%5D%2CC%5B0%2C3%5D%2CC%5B0%2C4%5D%2C%5Cn%5CnC%5B1%2C0%5D%2CC%5B1%2C1%5D%2CC%5B1%2C2%5D%2CC%5B1%2C3%5D%2CC%5B1%2C4%5D%2C%5Cn%5CnC%5B2%2C0%5D%2CC%5B2%2C1%5D%2CC%5B2%2C2%5D%2CC%5B2%2C3%5D%2CC%5B2%2C4%5D%2C%5Cn%5CnC%5B3%2C0%5D%2CC%5B3%2C1%5D%2CC%5B3%2C2%5D%2CC%5B3%2C3%5D%2CC%5B3%2C4%5D%2C%5Cn%5CnC%5B4%2C0%5D%2CC%5B4%2C1%5D%2CC%5B4%2C2%5D%2CC%5B4%2C3%5D%2CC%5B4%2C4%5D%2C%5Cn%5Cn%5Cn%23%23%23%23%20Tile%202%5CnC%5B0%2C5%5D%2CC%5B0%2C6%5D%2CC%5B0%2C7%5D%2CC%5B0%2C8%5D%2CC%5B0%2C9%5D%2C%5Cn%5CnC%5B1%2C5%5D%2CC%5B1%2C6%5D%2CC%5B1%2C7%5D%2CC%5B1%2C8%5D%2CC%5B1%2C9%5D%2C%5Cn%5CnC%5B2%2C5%5D%2CC%5B2%2C6%5D%2CC%5B2%2C7%5D%2CC%5B2%2C8%5D%2CC%5B2%2C9%5D%2C%5Cn%5CnC%5B3%2C5%5D%2CC%5B3%2C6%5D%2CC%5B3%2C7%5D%2CC%5B3%2C8%5D%2CC%5B3%2C9%5D%2C%5Cn%5CnC%5B4%2C5%5D%2CC%5B4%2C6%5D%2CC%5B4%2C7%5D%2CC%5B4%2C8%5D%2CC%5B4%2C9%5D%2C%5Cn%5Cn%23%23%23%23%20Tile%203%5Cn%5CnC%5B0%2C10%5D%2CC%5B0%2C11%5D%2CC%5B0%2C12%5D%2CC%5B0%2C13%5D%2CC%5B0%2C14%5D%2C%5Cn%5CnC%5B1%2C10%5D%2CC%5B1%2C11%5D%2CC%5B1%2C12%5D%2CC%5B1%2C13%5D%2CC%5B1%2C14%5D%2C%5Cn%5CnC%5B2%2C10%5D%2CC%5B2%2C11%5D%2CC%5B2%2C12%5D%2CC%5B2%2C13%5D%2CC%5B2%2C14%5D%2C%5Cn%5CnC%5B3%2C10%5D%2CC%5B3%2C11%5D%2CC%5B3%2C12%5D%2CC%5B3%2C13%5D%2CC%5B3%2C14%5D%2C%5Cn%5CnC%5B4%2C10%5D%2CC%5B4%2C11%5D%2CC%5B4%2C12%5D%2CC%5B4%2C13%5D%2CC%5B4%2C14%5D%2C%5Cn%5Cn...%22%2C%22%3Ca%20onclick%3D%27pt_editMarkdown(this)%27%20tabindex%3D%27-1%27%20class%3D%5C%22pt-markdown-link%5C%22%3E%5BMarkdown%5D%3C%2Fa%3E%3Ch3%20id%3D%5C%22orderofupdateonc%5C%22%3EOrder%20of%20update%20on%20C%3C%2Fh3%3E%5Cn%3Ch4%20id%3D%5C%22tile1%5C%22%3ETile%201%3C%2Fh4%3E%5Cn%3Cp%3EC%5B0%2C0%5D%2CC%5B0%2C1%5D%2CC%5B0%2C2%5D%2CC%5B0%2C3%5D%2CC%5B0%2C4%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B1%2C0%5D%2CC%5B1%2C1%5D%2CC%5B1%2C2%5D%2CC%5B1%2C3%5D%2CC%5B1%2C4%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B2%2C0%5D%2CC%5B2%2C1%5D%2CC%5B2%2C2%5D%2CC%5B2%2C3%5D%2CC%5B2%2C4%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B3%2C0%5D%2CC%5B3%2C1%5D%2CC%5B3%2C2%5D%2CC%5B3%2C3%5D%2CC%5B3%2C4%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B4%2C0%5D%2CC%5B4%2C1%5D%2CC%5B4%2C2%5D%2CC%5B4%2C3%5D%2CC%5B4%2C4%5D%2C%3C%2Fp%3E%5Cn%3Ch4%20id%3D%5C%22tile2%5C%22%3ETile%202%3C%2Fh4%3E%5Cn%3Cp%3EC%5B0%2C5%5D%2CC%5B0%2C6%5D%2CC%5B0%2C7%5D%2CC%5B0%2C8%5D%2CC%5B0%2C9%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B1%2C5%5D%2CC%5B1%2C6%5D%2CC%5B1%2C7%5D%2CC%5B1%2C8%5D%2CC%5B1%2C9%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B2%2C5%5D%2CC%5B2%2C6%5D%2CC%5B2%2C7%5D%2CC%5B2%2C8%5D%2CC%5B2%2C9%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B3%2C5%5D%2CC%5B3%2C6%5D%2CC%5B3%2C7%5D%2CC%5B3%2C8%5D%2CC%5B3%2C9%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B4%2C5%5D%2CC%5B4%2C6%5D%2CC%5B4%2C7%5D%2CC%5B4%2C8%5D%2CC%5B4%2C9%5D%2C%3C%2Fp%3E%5Cn%3Ch4%20id%3D%5C%22tile3%5C%22%3ETile%203%3C%2Fh4%3E%5Cn%3Cp%3EC%5B0%2C10%5D%2CC%5B0%2C11%5D%2CC%5B0%2C12%5D%2CC%5B0%2C13%5D%2CC%5B0%2C14%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B1%2C10%5D%2CC%5B1%2C11%5D%2CC%5B1%2C12%5D%2CC%5B1%2C13%5D%2CC%5B1%2C14%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B2%2C10%5D%2CC%5B2%2C11%5D%2CC%5B2%2C12%5D%2CC%5B2%2C13%5D%2CC%5B2%2C14%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B3%2C10%5D%2CC%5B3%2C11%5D%2CC%5B3%2C12%5D%2CC%5B3%2C13%5D%2CC%5B3%2C14%5D%2C%3C%2Fp%3E%5Cn%3Cp%3EC%5B4%2C10%5D%2CC%5B4%2C11%5D%2CC%5B4%2C12%5D%2CC%5B4%2C13%5D%2CC%5B4%2C14%5D%2C%3C%2Fp%3E%5Cn%3Cp%3E...%3C%2Fp%3E%5Cn%22%2C%22markdown%22%5D%2C%2210%22%3A%5B%22%23%20Composition%5Cn%23%20Permute%20K%20to%20outermost%20loop%20and%20tiling%20on%20the%202%20innermost%20loops%22%2C%22%3Ca%20onclick%3D%27pt_editMarkdown(this)%27%20tabindex%3D%27-1%27%20class%3D%5C%22pt-markdown-link%5C%22%3E%5BMarkdown%5D%3C%2Fa%3E%3Ch1%20id%3D%5C%22composition%5C%22%3EComposition%3C%2Fh1%3E%5Cn%3Ch1%20id%3D%5C%22permutektooutermostloopandtilingonthe2innermostloops%5C%22%3EPermute%20K%20to%20outermost%20loop%20and%20tiling%20on%20the%202%20innermost%20loops%3C%2Fh1%3E%5Cn%22%2C%22markdown%22%5D%2C%2211%22%3A%5B%22transformation_2%20%3D%20isl.union_map(%5C%22%7BW%5Bi%2Cj%2Ck%5D-%3EW%5Bk%2Ci%2Cj%5D%7D%5C%22)%5Cntransformation_3%20%3D%20isl.union_map(%5C%22%7BW%5Bi%2Cj%2Ck%5D-%3EW%5Bi%2Cfloor(j%2F5)%2Cfloor(k%2F5)%2Cj%255%2Ck%255%5D%7D%5C%22)%5Cntransformation_2_3%20%3D%20transformation_2.apply_range(transformation_3)%5Cntransformed_schedule_2_3%20%3D%20schedule.apply_range(transformation_2_3)%5Cnast_composed%20%3D%20build.node_from_schedule_map(transformed_schedule_2_3.intersect_domain(domain))%5Cnprint_code(ast_composed)%22%2C%22%3Cpre%20class%3D%27code%27%3E%3Ccode%20class%3D%5C%22cpp%20hljs%5C%22%3E%7B%5Cn%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%201%3B%20c1%20%2B%3D%201)%5Cn%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%203%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20for%20(int%20c3%20%3D%200%3B%20c3%20%3C%3D%204%3B%20c3%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20for%20(int%20c4%20%3D%200%3B%20c4%20%3C%3D%204%3B%20c4%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20%20%20S(5%20*%20c1%20%2B%20c3%2C%205%20*%20c2%20%2B%20c4)%3B%5Cn%20%20for%20(int%20c0%20%3D%200%3B%20c0%20%3C%3D%2029%3B%20c0%20%2B%3D%201)%5Cn%20%20%20%20for%20(int%20c1%20%3D%200%3B%20c1%20%3C%3D%201%3B%20c1%20%2B%3D%201)%5Cn%20%20%20%20%20%20for%20(int%20c2%20%3D%200%3B%20c2%20%3C%3D%203%3B%20c2%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20for%20(int%20c3%20%3D%200%3B%20c3%20%3C%3D%204%3B%20c3%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20%20%20for%20(int%20c4%20%3D%200%3B%20c4%20%3C%3D%204%3B%20c4%20%2B%3D%201)%5Cn%20%20%20%20%20%20%20%20%20%20%20%20T(5%20*%20c1%20%2B%20c3%2C%205%20*%20c2%20%2B%20c4%2C%20c0)%3B%5Cn%7D%5Cn%3C%2Fcode%3E%3C%2Fpre%3E%5Cn%22%2C%22python%22%5D%2C%2212%22%3A%5B%22%22%2C%22%22%2C%22%22%5D%7D%0A)

[Demo 3: Automatic Representation Extraction](http://playground.pollylabs.org/?sess=%7B%221%22%3A%5B%22context%2C%20domain%2C%20schedule%2C%20reads%2C%20writes%20%3D%20parse_code(%5C%22%5C%22%5C%22%5Cn%23pragma%20scop%5Cnfor%20(i%20%3D%200%3B%20i%20%3C%20N%3B%20i%2B%2B)%5Cn%20%20for%20(j%20%3D%200%3B%20j%20%3C%20M%3B%20j%2B%2B)%20%7B%5CnS%3A%20%20C%5Bi%5D%5Bj%5D%20%3D%200.0%3B%5Cn%20%20%20%20for%20(k%20%3D%200%3B%20k%20%3C%20M%3B%20%2B%2Bk)%5CnT%3A%20%20%20%20C%5Bi%5D%5Bj%5D%20%2B%3D%20A%5Bi%5D%5Bk%5D%20*%20B%5Bk%5D%5Bj%5D%3B%5Cn%20%20%7D%5Cn%23pragma%20endscop%5Cn%5C%22%5C%22%5C%22)%22%2C%22%22%2C%22%22%5D%2C%222%22%3A%5B%22print_latex(context)%22%2C%22%22%2C%22%22%5D%2C%223%22%3A%5B%22print_latex(domain)%22%2C%22%22%2C%22%22%5D%2C%224%22%3A%5B%22print_latex(schedule)%22%2C%22%22%2C%22%22%5D%2C%225%22%3A%5B%22print_latex(writes)%22%2C%22%22%2C%22%22%5D%2C%226%22%3A%5B%22print_latex(reads)%22%2C%22%22%2C%22%22%5D%2C%227%22%3A%5B%22%22%2C%22%22%2C%22%22%5D%2C%228%22%3A%5B%22%22%2C%22%22%2C%22%22%5D%7D)



